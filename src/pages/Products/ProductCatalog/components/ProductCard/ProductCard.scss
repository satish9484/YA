/* =====================================================
  Product Card - Component Styles
  CRO-Optimized for Product Discovery and Conversion
 ================================================================ */

.product-card {
    display: flex;
    flex-direction: column;
    height: 100%;
    background: color(bg-primary);
    border: 2px solid color(border-primary);
    border-radius: $border-radius-lg;
    box-shadow: $shadow-sm;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
    position: relative;

    &:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12);
        border-color: color(accent-primary);
    }

    // Variants
    &--compact {
        .product-card__image {
            height: 120px;
        }

        .product-card__content {
            padding: $spacing-4;
        }

        .product-card__title {
            font-size: $font-size-base;
        }
    }

    &--detailed {
        .product-card__image {
            height: 240px;
        }

        .product-card__content {
            padding: $spacing-8;
        }

        .product-card__specifications {
            display: block;
        }
    }

    // Image container
    &__image-container {
        position: relative;
        width: 100%;
        overflow: hidden;
        background: linear-gradient(135deg, color(bg-secondary) 0%, color(bg-tertiary) 100%);
    }

    &__image {
        width: 100%;
        height: 180px;
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    &:hover &__image {
        transform: scale(1.05);
    }

    // Content area
    &__content {
        padding: $spacing-6;
        display: flex;
        flex-direction: column;
        flex-grow: 1;
        gap: $spacing-3;
    }

    &__header {
        display: flex;
        flex-direction: column;
        gap: $spacing-2;
    }

    &__title {
        font-size: $font-size-lg;
        font-weight: $font-weight-semibold;
        color: color(text-primary);
        margin: 0;
        line-height: $line-height-tight;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    &__description {
        color: color(text-secondary);
        font-size: $font-size-sm;
        line-height: $line-height-normal;
        margin: 0;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    // Rating section
    &__rating {
        display: flex;
        align-items: center;
        gap: $spacing-2;
        margin: $spacing-2 0;
    }

    &__rating-stars {
        display: flex;
        gap: 2px;
    }

    &__rating-star {
        width: 16px;
        height: 16px;
        color: color(warning-500);

        &--empty {
            color: color(border);
        }
    }

    &__rating-text {
        font-size: $font-size-xs;
        color: color(text-secondary);
    }

    // Price section
    &__price {
        font-size: $font-size-xl;
        font-weight: $font-weight-bold;
        color: color(accent-primary);
        margin: $spacing-2 0;
    }

    &__price-original {
        font-size: $font-size-base;
        color: color(text-secondary);
        text-decoration: line-through;
        margin-left: $spacing-2;
    }

    // Specifications (detailed variant)
    &__specifications {
        display: none;
        margin: $spacing-3 0;
        padding: $spacing-3;
        background: color(bg-secondary);
        border-radius: $border-radius-md;
    }

    &__spec-list {
        list-style: none;
        padding: 0;
        margin: 0;
        font-size: $font-size-xs;
        color: color(text-secondary);
    }

    &__spec-item {
        display: flex;
        justify-content: space-between;
        padding: $spacing-1 0;
        border-bottom: 1px solid color(border);

        &:last-child {
            border-bottom: none;
        }
    }

    &__spec-label {
        font-weight: $font-weight-medium;
    }

    &__spec-value {
        color: color(text-primary);
    }

    // Actions section
    &__actions {
        margin-top: auto;
        display: flex;
        flex-direction: column;
        gap: $spacing-2;
    }

    &__primary-action {
        width: 100%;
        padding: $spacing-3 $spacing-4;
        background: linear-gradient(135deg, color(accent-primary) 0%, color(primary-600) 100%);
        border: 2px solid color(accent-primary);
        border-radius: $border-radius-md;
        color: color(accent-contrast);
        font-weight: $font-weight-semibold;
        font-size: $font-size-base;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;

        &::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        &:hover {
            background: linear-gradient(135deg, color(primary-600) 0%, color(accent-primary) 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(color(accent-primary), 0.3);

            &::before {
                left: 100%;
            }
        }

        &:active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(color(accent-primary), 0.2);
        }

        &:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
    }

    &__secondary-actions {
        display: flex;
        gap: $spacing-2;
    }

    &__secondary-action {
        flex: 1;
        padding: $spacing-2;
        background: color(bg-secondary);
        border: 1px solid color(border);
        border-radius: $border-radius-md;
        color: color(text-primary);
        font-size: $font-size-sm;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: $spacing-1;

        &:hover {
            background: color(accent-primary);
            color: color(accent-contrast);
            border-color: color(accent-primary);
        }
    }

    // Stock status
    &__stock-status {
        position: absolute;
        top: $spacing-2;
        right: $spacing-2;
        padding: $spacing-1 $spacing-2;
        border-radius: $border-radius-sm;
        font-size: $font-size-xs;
        font-weight: $font-weight-medium;
        text-transform: uppercase;
        letter-spacing: 0.5px;

        &--in-stock {
            background: color(success-100);
            color: color(success-700);
        }

        &--low-stock {
            background: color(warning-100);
            color: color(warning-700);
        }

        &--out-of-stock {
            background: color(error-100);
            color: color(error-700);
        }
    }

    // Tags
    &__tags {
        position: absolute;
        top: $spacing-2;
        left: $spacing-2;
        display: flex;
        flex-wrap: wrap;
        gap: $spacing-1;
    }

    &__tag {
        padding: $spacing-1 $spacing-2;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        border-radius: $border-radius-sm;
        font-size: $font-size-xs;
        font-weight: $font-weight-medium;
    }

    // Loading state
    &--loading {
        .product-card__image {
            background: color(bg-secondary);
            animation: pulse 1.5s ease-in-out infinite;
        }

        .product-card__content {
            opacity: 0.6;
        }
    }

    // Error state
    &--error {
        border-color: color(error-300);

        .product-card__image {
            background: color(error-50);
        }
    }

    // Responsive adjustments
    @include respond-to('sm') {
        &__content {
            padding: $spacing-4;
        }

        &__title {
            font-size: $font-size-base;
        }

        &__price {
            font-size: $font-size-lg;
        }

        &__primary-action {
            padding: $spacing-2 $spacing-3;
            font-size: $font-size-sm;
        }
    }

    // Dark theme support
    [data-theme='dark'] & {
        background: color(bg-primary);
        border-color: color(border-primary);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);

        &:hover {
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);
            border-color: color(accent-primary);
        }

        &__image-container {
            background: linear-gradient(135deg, color(bg-secondary) 0%, color(bg-tertiary) 100%);
        }

        &__specifications {
            background: color(bg-secondary);
        }
    }
}

// Loading animation
@keyframes pulse {
    0%,
    100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}
