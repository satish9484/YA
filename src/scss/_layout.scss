// =============================================================================
// LAYOUT SYSTEM - CONTAINERS, GRID, SPACING, COLORS
// =============================================================================

@use 'sass:math';
@use './variable' as *;
@use './mixin' as *;

// Container system
.container {
    padding-left: $spacing-4;
    padding-right: $spacing-4;
    @include container();

    @include respond-to('sm') {
        padding-left: $spacing-6;
        padding-right: $spacing-6;
    }

    @include respond-to('lg') {
        padding-left: $spacing-8;
        padding-right: $spacing-8;
    }
}

.container-fluid {
    @include container(100%);
    padding-left: $spacing-4;
    padding-right: $spacing-4;

    @include respond-to('sm') {
        padding-left: $spacing-6;
        padding-right: $spacing-6;
    }

    @include respond-to('lg') {
        padding-left: $spacing-8;
        padding-right: $spacing-8;
    }
}

// Use flex utilities (flex/*) and grid utilities (grid/*) for layout.

// =============================================================================
// LAYOUT COLOR UTILITIES
// =============================================================================

// Section background utilities
.section-bg-primary {
    background-color: color(bg-primary);
}

.section-bg-secondary {
    background-color: color(bg-secondary);
}

.section-bg-tertiary {
    background-color: color(bg-tertiary);
}

.section-bg-interactive {
    background-color: color(bg-interactive);
}

// Gradient background utilities
.section-gradient-primary {
    background: linear-gradient(135deg, color(bg-primary) 0%, color(bg-secondary) 100%);
}

.section-gradient-secondary {
    background: linear-gradient(135deg, color(bg-secondary) 0%, color(bg-tertiary) 100%);
}

.section-gradient-accent {
    background: linear-gradient(135deg, color(accent-primary) 0%, color(accent-focus-ring) 100%);
}

// Border utilities for layout
.section-border {
    border: 1px solid color(border-primary);
}

.section-border-top {
    border-top: 1px solid color(border-primary);
}

.section-border-bottom {
    border-bottom: 1px solid color(border-primary);
}

.section-border-left {
    border-left: 1px solid color(border-primary);
}

.section-border-right {
    border-right: 1px solid color(border-primary);
}

// Divider utilities
.divider {
    height: 1px;
    background-color: color(border-primary);
    margin: $spacing-4 0;
}

.divider-thick {
    height: 2px;
    background-color: color(border-primary);
    margin: $spacing-6 0;
}

.divider-accent {
    height: 1px;
    background-color: color(accent-primary);
    margin: $spacing-4 0;
}

// Layout container utilities with colors
.container-primary {
    @extend .container;
    background-color: color(bg-primary);
}

.container-secondary {
    @extend .container;
    background-color: color(bg-secondary);
}

.container-accent {
    @extend .container;
    background-color: color(accent-primary);
    color: color(accent-contrast);
}

// Card layout utilities
.layout-card {
    background-color: color(bg-primary);
    border: 1px solid color(border-primary);
    border-radius: $border-radius-lg;
    padding: $spacing-4;
    @include box-shadow($shadow-sm);
}

.layout-card-elevated {
    @extend .layout-card;
    @include box-shadow($shadow-md);
}

.layout-card-interactive {
    @extend .layout-card;
    cursor: pointer;
    @include transition(all 0.3s ease);

    &:hover {
        @include box-shadow($shadow-lg);
        @include transform(translateY(-2px));
    }
}

// =============================================================================
// RESPONSIVE SPACING SYSTEM
// =============================================================================

// Generate responsive spacing utilities
@each $size, $value in $spacing {
    .m-#{$size} {
        margin: $value !important;
    }
    .mt-#{$size} {
        margin-top: $value !important;
    }
    .mr-#{$size} {
        margin-right: $value !important;
    }
    .mb-#{$size} {
        margin-bottom: $value !important;
    }
    .ml-#{$size} {
        margin-left: $value !important;
    }
    .mx-#{$size} {
        margin-left: $value !important;
        margin-right: $value !important;
    }
    .my-#{$size} {
        margin-top: $value !important;
        margin-bottom: $value !important;
    }

    .p-#{$size} {
        padding: $value !important;
    }
    .pt-#{$size} {
        padding-top: $value !important;
    }
    .pr-#{$size} {
        padding-right: $value !important;
    }
    .pb-#{$size} {
        padding-bottom: $value !important;
    }
    .pl-#{$size} {
        padding-left: $value !important;
    }
    .px-#{$size} {
        padding-left: $value !important;
        padding-right: $value !important;
    }
    .py-#{$size} {
        padding-top: $value !important;
        padding-bottom: $value !important;
    }

    @each $respond-to, $bp-value in $respond-tos {
        @if $bp-value > 0 {
            @include respond-to($respond-to) {
                .#{$respond-to}\:m-#{$size} {
                    margin: $value !important;
                }
                .#{$respond-to}\:mt-#{$size} {
                    margin-top: $value !important;
                }
                .#{$respond-to}\:mr-#{$size} {
                    margin-right: $value !important;
                }
                .#{$respond-to}\:mb-#{$size} {
                    margin-bottom: $value !important;
                }
                .#{$respond-to}\:ml-#{$size} {
                    margin-left: $value !important;
                }
                .#{$respond-to}\:mx-#{$size} {
                    margin-left: $value !important;
                    margin-right: $value !important;
                }
                .#{$respond-to}\:my-#{$size} {
                    margin-top: $value !important;
                    margin-bottom: $value !important;
                }

                .#{$respond-to}\:p-#{$size} {
                    padding: $value !important;
                }
                .#{$respond-to}\:pt-#{$size} {
                    padding-top: $value !important;
                }
                .#{$respond-to}\:pr-#{$size} {
                    padding-right: $value !important;
                }
                .#{$respond-to}\:pb-#{$size} {
                    padding-bottom: $value !important;
                }
                .#{$respond-to}\:pl-#{$size} {
                    padding-left: $value !important;
                }
                .#{$respond-to}\:px-#{$size} {
                    padding-left: $value !important;
                    padding-right: $value !important;
                }
                .#{$respond-to}\:py-#{$size} {
                    padding-top: $value !important;
                    padding-bottom: $value !important;
                }
            }
        }
    }
}

// =============================================================================
// UTILITY CLASSES FOR NEW COLOR PALETTE
// =============================================================================

// Text color utilities
.text-primary {
    color: color(text-primary) !important;
}

.text-secondary {
    color: color(text-secondary) !important;
}

.text-interactive {
    color: color(text-interactive) !important;
}

.text-tertiary {
    color: color(text-tertiary) !important;
}

.text-accent {
    color: color(accent-primary) !important;
}

.text-error {
    color: color(error-text) !important;
}

.text-inverse {
    color: color(text-inverse) !important;
}

// Background color utilities
.bg-primary {
    background-color: color(bg-primary) !important;
}

.bg-secondary {
    background-color: color(bg-secondary) !important;
}

.bg-tertiary {
    background-color: color(bg-tertiary) !important;
}

.bg-interactive {
    background-color: color(bg-interactive) !important;
}

.bg-accent {
    background-color: color(accent-primary) !important;
    color: color(accent-contrast) !important;
}

.bg-error {
    background-color: color(error-bg) !important;
    border: 1px solid color(error-border) !important;
    color: color(error-text) !important;
}

// Border color utilities
.border-primary {
    border-color: color(border-primary) !important;
}

.border-accent {
    border-color: color(accent-primary) !important;
}

.border-error {
    border-color: color(error-border) !important;
}

// =============================================================================
// ADDITIONAL LAYOUT UTILITIES FOR NEW COLOR PALETTE
// =============================================================================

// Layout spacing with color context
.section-spacing {
    padding: $spacing-8 0;

    @include respond-to('md') {
        padding: $spacing-12 0;
    }

    @include respond-to('lg') {
        padding: $spacing-16 0;
    }
}

.section-spacing-sm {
    padding: $spacing-4 0;

    @include respond-to('md') {
        padding: $spacing-6 0;
    }
}

.section-spacing-lg {
    padding: $spacing-12 0;

    @include respond-to('md') {
        padding: $spacing-16 0;
    }

    @include respond-to('lg') {
        padding: $spacing-20 0;
    }
}

// Layout grid with color theming
.layout-grid {
    display: grid;
    gap: $spacing-4;

    &.layout-grid-2 {
        grid-template-columns: repeat(2, 1fr);
    }

    &.layout-grid-3 {
        grid-template-columns: repeat(3, 1fr);
    }

    &.layout-grid-4 {
        grid-template-columns: repeat(4, 1fr);
    }

    @include respond-to-max('md') {
        &.layout-grid-2,
        &.layout-grid-3,
        &.layout-grid-4 {
            grid-template-columns: 1fr;
        }
    }
}

// Layout flex with color theming
.layout-flex {
    display: flex;
    gap: $spacing-4;

    &.layout-flex-center {
        align-items: center;
        justify-content: center;
    }

    &.layout-flex-between {
        align-items: center;
        justify-content: space-between;
    }

    &.layout-flex-column {
        flex-direction: column;
    }

    &.layout-flex-wrap {
        flex-wrap: wrap;
    }
}

// Layout overlay utilities
.layout-overlay {
    position: relative;

    &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1;
    }

    .layout-overlay-content {
        position: relative;
        z-index: 2;
    }
}

// Layout sticky utilities
.layout-sticky {
    position: sticky;
    top: 0;
    z-index: 100;
    background-color: color(bg-primary);
    border-bottom: 1px solid color(border-primary);
}

// Layout responsive visibility utilities
.layout-hidden-mobile {
    @include respond-to-max('sm') {
        display: none !important;
    }
}

.layout-hidden-tablet {
    @include respond-to-max('md') {
        display: none !important;
    }
}

.layout-hidden-desktop {
    @include respond-to('lg') {
        display: none !important;
    }
}

.layout-visible-mobile {
    display: none !important;

    @include respond-to-max('sm') {
        display: block !important;
    }
}

.layout-visible-tablet {
    display: none !important;

    @include respond-to('sm') {
        display: block !important;
    }

    @include respond-to-max('md') {
        display: block !important;
    }
}

.layout-visible-desktop {
    display: none !important;

    @include respond-to('lg') {
        display: block !important;
    }
}
