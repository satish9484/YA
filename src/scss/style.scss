// =============================================================================
// DESIGN SYSTEM - MAIN STYLESHEET
// =============================================================================

// Import design system foundation
@use './variable' as *; // Import variables
@use './mixin' as *; // Import mixins
@use './reset' as *; // Import reset styles
@use './utilities' as *; // Import utilities
@use './col' as *; // Import column styles
@use './flex' as *; // Import flex styles
@use './common' as *; // Import common styles
@use './common2' as *; // Import another set of common styles
@use 'sass:math'; // Import math module for division

// =============================================================================
// GLOBAL STYLES
// =============================================================================

html {
    font-size: 16px; // Base font size for rem calculations
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
    font-family: $font-family-sans;
    font-weight: $font-weight-normal;
    line-height: $line-height-normal;
    color: $neutral-900;
    background-color: $neutral-100;
}

body {
    font-size: $font-size-base;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    color: $neutral-900;
    font-family: $font-family-sans;
    font-weight: $font-weight-normal;
    line-height: $line-height-normal;
    background-color: $neutral-100;
    margin: 0;
    padding: 0;
}

// =============================================================================
// TYPOGRAPHY SCALE
// =============================================================================

h1,
.h1 {
    @include heading-style($font-size-4xl, $font-weight-bold);
    margin-bottom: $spacing-6;

    @include breakpoint(md) {
        font-size: $font-size-3xl;
    }

    @include breakpoint(sm) {
        font-size: $font-size-2xl;
    }
}

h2,
.h2 {
    @include heading-style($font-size-3xl, $font-weight-semibold);
    margin-bottom: $spacing-5;

    @include breakpoint(md) {
        font-size: $font-size-2xl;
    }

    @include breakpoint(sm) {
        font-size: $font-size-xl;
    }
}

h3,
.h3 {
    @include heading-style($font-size-2xl, $font-weight-semibold);
    margin-bottom: $spacing-4;

    @include breakpoint(md) {
        font-size: $font-size-xl;
    }

    @include breakpoint(sm) {
        font-size: $font-size-lg;
    }
}

h4,
.h4 {
    @include heading-style($font-size-xl, $font-weight-medium);
    margin-bottom: $spacing-3;

    @include breakpoint(sm) {
        font-size: $font-size-base;
    }
}

h5,
.h5 {
    @include heading-style($font-size-lg, $font-weight-medium);
    margin-bottom: $spacing-2;
}

h6,
.h6 {
    @include heading-style($font-size-base, $font-weight-medium);
    margin-bottom: $spacing-2;
}

p,
.p {
    @include text-style($font-size-base, $font-weight-normal, $line-height-relaxed);
    margin-bottom: $spacing-4;

    &.small {
        font-size: $font-size-sm;
        line-height: $line-height-normal;
    }

    &.large {
        font-size: $font-size-lg;
        line-height: $line-height-relaxed;
    }
}

// =============================================================================
// COMPONENT STYLES
// =============================================================================

// Button Components
.btn {
    @include button-base;

    &--primary {
        @include button-variant($primary-500, $white, $primary-600);
    }

    &--secondary {
        @include button-variant($neutral-200, $neutral-900, $neutral-300);
    }

    &--success {
        @include button-variant($success-500, $white, $success-600);
    }

    &--warning {
        @include button-variant($warning-500, $white, $warning-600);
    }

    &--error {
        @include button-variant($error-500, $white, $error-600);
    }

    &--outline {
        background-color: transparent;
        border: 2px solid $primary-500;
        color: $primary-500;

        &:hover:not(:disabled) {
            background-color: $primary-500;
            color: $white;
        }
    }

    &--ghost {
        background-color: transparent;
        color: $primary-500;

        &:hover:not(:disabled) {
            background-color: $primary-50;
        }
    }

    &--sm {
        padding: $spacing-2 $spacing-3;
        font-size: $font-size-sm;
    }

    &--lg {
        padding: $spacing-4 $spacing-6;
        font-size: $font-size-lg;
    }
}

// Card Components
.card {
    @include card-base;
    @include card-padding;

    &--compact {
        @include card-padding($spacing-4);
    }

    &--spacious {
        @include card-padding($spacing-8);
    }

    &--bordered {
        border: 1px solid $neutral-200;
    }

    &--elevated {
        box-shadow: $shadow-lg;

        &:hover {
            box-shadow: $shadow-xl;
        }
    }
}

// Form Components
.form-input {
    @include input-base;

    &--error {
        border-color: $error-500;

        &:focus {
            border-color: $error-500;
            box-shadow: 0 0 0 3px rgba($error-500, 0.1);
        }
    }

    &--success {
        border-color: $success-500;

        &:focus {
            border-color: $success-500;
            box-shadow: 0 0 0 3px rgba($success-500, 0.1);
        }
    }
}

.form-label {
    display: block;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $neutral-700;
    margin-bottom: $spacing-2;
}

.form-error {
    font-size: $font-size-sm;
    color: $error-500;
    margin-top: $spacing-1;
}

// =============================================================================
// LAYOUT COMPONENTS
// =============================================================================

// Section component
.section {
    padding: $spacing-16 0;

    &--compact {
        padding: $spacing-8 0;
    }

    &--spacious {
        padding: $spacing-24 0;
    }

    @include breakpoint(sm) {
        padding: $spacing-8 0;

        &--compact {
            padding: $spacing-4 0;
        }

        &--spacious {
            padding: $spacing-12 0;
        }
    }
}

// Hero component
.hero {
    @include flex-column-center;
    min-height: 60vh;
    text-align: center;
    padding: $spacing-20 0;

    &__title {
        font-size: $font-size-5xl;
        font-weight: $font-weight-bold;
        color: $neutral-900;
        margin-bottom: $spacing-6;

        @include breakpoint(md) {
            font-size: $font-size-4xl;
        }

        @include breakpoint(sm) {
            font-size: $font-size-3xl;
        }
    }

    &__subtitle {
        font-size: $font-size-xl;
        color: $neutral-600;
        margin-bottom: $spacing-8;
        max-width: 600px;

        @include breakpoint(sm) {
            font-size: $font-size-lg;
        }
    }

    &__actions {
        @include flex-center;
        gap: $spacing-4;

        @include breakpoint(sm) {
            flex-direction: column;
            width: 100%;

            .btn {
                width: 100%;
            }
        }
    }
}

// =============================================================================
// RESPONSIVE GRID SYSTEM
// =============================================================================

// Auto-generate responsive grid classes
@each $breakpoint, $value in $breakpoints {
    @if $value > 0 {
        @include breakpoint($breakpoint) {
            @for $i from 1 through 12 {
                .col-#{$breakpoint}-#{$i} {
                    flex: 0 0 percentage(math.div($i, 12));
                    max-width: percentage(math.div($i, 12));
                }
            }
        }
    }
}

// =============================================================================
// ANIMATION CLASSES
// =============================================================================

.animate-fade-in {
    @include fade-in;
}

.animate-slide-up {
    @include slide-up;
}

.animate-scale-hover {
    @include scale-hover;
}

// =============================================================================
// ACCESSIBILITY ENHANCEMENTS
// =============================================================================

// Focus styles for better accessibility
*:focus {
    outline: 2px solid $primary-500;
    outline-offset: 2px;
}

// Skip link for keyboard navigation
.skip-link {
    position: absolute;
    top: -40px;
    left: 6px;
    background: $primary-500;
    color: $white;
    padding: 8px;
    text-decoration: none;
    border-radius: $border-radius-base;
    z-index: $z-index-fixed;

    &:focus {
        top: 6px;
    }
}

// =============================================================================
// PRINT STYLES
// =============================================================================

@media print {
    * {
        background: transparent !important;
        color: black !important;
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: ' (' attr(href) ')';
    }

    abbr[title]:after {
        content: ' (' attr(title) ')';
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group;
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}
